Oct 26 15:27:48 [info] SELECT version FROM schema_migrations
Oct 26 15:27:48 [info] SELECT version FROM schema_migrations
Oct 26 15:27:48 [info] SELECT version FROM schema_migrations
Oct 26 15:28:00 [info] SELECT version FROM schema_migrations
Oct 26 15:28:00 [info] SELECT version FROM schema_migrations
Oct 26 15:28:00 [info] SELECT version FROM schema_migrations
Oct 26 15:28:00 [info] CREATE TABLE `moderator_notes` (
`note_id` int(11) UNSIGNED auto_increment PRIMARY KEY,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 26 15:28:00 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 26 15:28:00 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 26 15:28:01 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 13:40:37 [info] SELECT version FROM schema_migrations
Oct 27 13:40:37 [info] SELECT version FROM schema_migrations
Oct 27 13:40:37 [info] SELECT version FROM schema_migrations
Oct 27 13:43:16 [info] SELECT version FROM schema_migrations
Oct 27 13:43:16 [info] SELECT version FROM schema_migrations
Oct 27 13:43:16 [info] SELECT version FROM schema_migrations
Oct 27 13:43:16 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) NOT NULL
) ;
Oct 27 13:43:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:43:41 [info] SELECT version FROM schema_migrations
Oct 27 13:43:41 [info] SELECT version FROM schema_migrations
Oct 27 13:43:41 [info] SELECT version FROM schema_migrations
Oct 27 13:43:41 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:43:41 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:44:10 [info] SELECT version FROM schema_migrations
Oct 27 13:44:10 [info] SELECT version FROM schema_migrations
Oct 27 13:44:10 [info] SELECT version FROM schema_migrations
Oct 27 13:44:10 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) PRIMARY KEY NOT NULL
) ;
Oct 27 13:44:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:44:19 [info] SELECT version FROM schema_migrations
Oct 27 13:44:19 [info] SELECT version FROM schema_migrations
Oct 27 13:44:19 [info] SELECT version FROM schema_migrations
Oct 27 13:44:19 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:44:19 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:44:27 [info] SELECT version FROM schema_migrations
Oct 27 13:44:27 [info] SELECT version FROM schema_migrations
Oct 27 13:44:27 [info] SELECT version FROM schema_migrations
Oct 27 13:44:27 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) PRIMARY KEY NOT NULL
) ;
Oct 27 13:44:27 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:44:59 [info] SELECT version FROM schema_migrations
Oct 27 13:44:59 [info] SELECT version FROM schema_migrations
Oct 27 13:44:59 [info] SELECT version FROM schema_migrations
Oct 27 13:44:59 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:44:59 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:45:00 [info] SELECT version FROM schema_migrations
Oct 27 13:45:00 [info] SELECT version FROM schema_migrations
Oct 27 13:45:00 [info] SELECT version FROM schema_migrations
Oct 27 13:45:00 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) PRIMARY KEY NOT NULL
) ;
Oct 27 13:45:00 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:45:56 [info] SELECT version FROM schema_migrations
Oct 27 13:45:56 [info] SELECT version FROM schema_migrations
Oct 27 13:45:56 [info] SELECT version FROM schema_migrations
Oct 27 13:45:56 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:45:56 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:45:57 [info] SELECT version FROM schema_migrations
Oct 27 13:45:57 [info] SELECT version FROM schema_migrations
Oct 27 13:45:57 [info] SELECT version FROM schema_migrations
Oct 27 13:45:57 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) PRIMARY KEY NOT NULL
) ;
Oct 27 13:45:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:46:06 [info] SELECT version FROM schema_migrations
Oct 27 13:46:06 [info] SELECT version FROM schema_migrations
Oct 27 13:46:06 [info] SELECT version FROM schema_migrations
Oct 27 13:46:06 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:46:06 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:46:18 [info] SELECT version FROM schema_migrations
Oct 27 13:46:18 [info] SELECT version FROM schema_migrations
Oct 27 13:46:18 [info] SELECT version FROM schema_migrations
Oct 27 13:46:18 [info] CREATE TABLE `foobars` (
`foo_id` integer(11) PRIMARY KEY NOT NULL
) ;
Oct 27 13:46:18 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:46:24 [info] SELECT version FROM schema_migrations
Oct 27 13:46:24 [info] SELECT version FROM schema_migrations
Oct 27 13:46:24 [info] SELECT version FROM schema_migrations
Oct 27 13:46:24 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:46:24 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:49:01 [info] SELECT version FROM schema_migrations
Oct 27 13:49:01 [info] SELECT version FROM schema_migrations
Oct 27 13:49:01 [info] SELECT version FROM schema_migrations
Oct 27 13:49:01 [info] INSERT INTO schema_migrations (version) VALUES ('20101027203759')
Oct 27 13:49:36 [info] SELECT version FROM schema_migrations
Oct 27 13:49:36 [info] SELECT version FROM schema_migrations
Oct 27 13:49:36 [info] SELECT version FROM schema_migrations
Oct 27 13:49:36 [info] DROP TABLE IF EXISTS `foobars`
Oct 27 13:49:36 [info] DELETE FROM schema_migrations WHERE version = '20101027203759'
Oct 27 13:49:39 [info] SELECT version FROM schema_migrations
Oct 27 13:49:39 [info] SELECT version FROM schema_migrations
Oct 27 13:49:39 [info] SELECT version FROM schema_migrations
Oct 27 13:50:07 [info] SELECT version FROM schema_migrations
Oct 27 13:50:07 [info] SELECT version FROM schema_migrations
Oct 27 13:50:07 [info] SELECT version FROM schema_migrations
Oct 27 13:50:18 [info] SELECT version FROM schema_migrations
Oct 27 13:50:18 [info] SELECT version FROM schema_migrations
Oct 27 13:50:18 [info] SELECT version FROM schema_migrations
Oct 27 13:50:54 [info] SELECT version FROM schema_migrations
Oct 27 13:50:54 [info] SELECT version FROM schema_migrations
Oct 27 13:50:54 [info] SELECT version FROM schema_migrations
Oct 27 13:51:01 [info] SELECT version FROM schema_migrations
Oct 27 13:51:01 [info] SELECT version FROM schema_migrations
Oct 27 13:51:01 [info] SELECT version FROM schema_migrations
Oct 27 13:51:52 [info] SELECT version FROM schema_migrations
Oct 27 13:51:52 [info] SELECT version FROM schema_migrations
Oct 27 13:51:52 [info] SELECT version FROM schema_migrations
Oct 27 13:52:29 [info] SELECT version FROM schema_migrations
Oct 27 13:52:29 [info] SELECT version FROM schema_migrations
Oct 27 13:52:29 [info] SELECT version FROM schema_migrations
Oct 27 13:52:36 [info] SELECT version FROM schema_migrations
Oct 27 13:52:36 [info] SELECT version FROM schema_migrations
Oct 27 13:52:36 [info] SELECT version FROM schema_migrations
Oct 27 13:52:39 [info] SELECT version FROM schema_migrations
Oct 27 13:52:39 [info] SELECT version FROM schema_migrations
Oct 27 13:52:39 [info] SELECT version FROM schema_migrations
Oct 27 13:53:15 [info] SELECT version FROM schema_migrations
Oct 27 13:53:15 [info] SELECT version FROM schema_migrations
Oct 27 13:53:15 [info] SELECT version FROM schema_migrations
Oct 27 13:53:50 [info] SELECT version FROM schema_migrations
Oct 27 13:53:50 [info] SELECT version FROM schema_migrations
Oct 27 13:53:50 [info] SELECT version FROM schema_migrations
Oct 27 13:55:10 [info] SELECT version FROM schema_migrations
Oct 27 13:55:10 [info] SELECT version FROM schema_migrations
Oct 27 13:55:10 [info] SELECT version FROM schema_migrations
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 13:55:10 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 13:55:10 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 13:55:10 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 13:55:10 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 13:55:11 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 13:55:11 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:55:11 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:55:11 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:55:11 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 13:55:14 [info] SELECT version FROM schema_migrations
Oct 27 13:55:14 [info] SELECT version FROM schema_migrations
Oct 27 13:55:14 [info] SELECT version FROM schema_migrations
Oct 27 13:55:14 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:55:14 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:14 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 13:55:14 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:55:14 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:14 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 13:55:14 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 13:55:14 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 13:55:15 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:55:15 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:15 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 13:55:15 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 13:55:15 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:55:15 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 13:55:15 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 13:55:15 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:55:15 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:55:15 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 13:55:15 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:55:15 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:55:15 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 13:55:15 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 13:55:15 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 13:55:15 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 13:55:15 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 13:55:15 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 13:55:15 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 13:55:16 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 13:55:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 13:55:16 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 13:55:16 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 13:55:16 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 13:55:16 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 13:55:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 13:55:16 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:55:16 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:16 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 13:55:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 13:55:16 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 13:55:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 13:55:16 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:16 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 13:55:16 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 13:55:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 13:55:16 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 13:55:17 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 13:55:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 13:55:17 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:17 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 13:55:17 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 13:55:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 13:55:34 [info] SELECT version FROM schema_migrations
Oct 27 13:55:34 [info] SELECT version FROM schema_migrations
Oct 27 13:55:34 [info] SELECT version FROM schema_migrations
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 13:55:34 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 13:55:34 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 13:55:34 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:55:34 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:55:34 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 13:55:45 [info] SELECT version FROM schema_migrations
Oct 27 13:55:45 [info] SELECT version FROM schema_migrations
Oct 27 13:55:45 [info] SELECT version FROM schema_migrations
Oct 27 13:55:45 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:55:45 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:45 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 13:55:45 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:55:45 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:45 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 13:55:45 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 13:55:45 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 13:55:45 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:55:45 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:55:46 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 13:55:46 [info]     INSERT INTO message_groups (group_hash, user_ids, user_count, created_at) (
        SELECT DISTINCT MD5(IF(user_id < with_user_id, CONCAT_WS(',', user_id, with_user_id), CONCAT_WS(',', with_user_id, user_id))) AS group_hash, 
        IF(user_id < with_user_id, CONCAT_WS(',', user_id, with_user_id), CONCAT_WS(',', with_user_id, user_id)) AS user_ids,
        2 AS user_count, 
        0 AS created_at 
    FROM message_with)
Oct 27 13:55:46 [info]     INSERT INTO message_group_info (message_group_id, user_id, created_at, message_count, unread_count, last_message_at)
    (
        SELECT 
            message_groups.message_group_id, message_with.user_id, 0, message_with.messages, message_with.unread, message_with.last_message
        FROM 
            message_with 
        LEFT JOIN message_groups ON 
            message_groups.group_hash = MD5(IF(message_with.user_id < message_with.with_user_id, CONCAT_WS(',', message_with.user_id, message_with.with_user_id), CONCAT_WS(',', message_with.with_user_id, message_with.user_id)))
    )
Oct 27 13:56:40 [info] SELECT version FROM schema_migrations
Oct 27 13:56:40 [info] SELECT version FROM schema_migrations
Oct 27 13:56:40 [info] SELECT version FROM schema_migrations
Oct 27 13:58:54 [info] SELECT version FROM schema_migrations
Oct 27 13:58:54 [info] SELECT version FROM schema_migrations
Oct 27 13:58:54 [info] SELECT version FROM schema_migrations
Oct 27 13:58:54 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:58:54 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:54 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 13:58:54 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:58:54 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:54 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 13:58:54 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 13:58:54 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 13:58:54 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:58:54 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:54 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 13:58:54 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 13:58:54 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:58:54 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 13:58:55 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:58:55 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 13:58:55 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:58:55 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 13:58:55 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 13:58:55 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 13:58:55 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 13:58:55 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 13:58:55 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 13:58:55 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 13:58:55 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 13:58:55 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 13:58:56 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 13:58:56 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 13:58:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 13:58:56 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:58:56 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:56 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 13:58:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 13:58:56 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 13:58:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 13:58:56 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:56 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 13:58:56 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 13:58:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 13:58:56 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 13:58:56 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 13:58:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 13:58:56 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:58:57 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 13:58:57 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 13:58:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 13:59:53 [info] SELECT version FROM schema_migrations
Oct 27 13:59:53 [info] SELECT version FROM schema_migrations
Oct 27 13:59:53 [info] SELECT version FROM schema_migrations
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 13:59:53 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 13:59:53 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 13:59:53 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:59:53 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:59:53 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 13:59:55 [info] SELECT version FROM schema_migrations
Oct 27 13:59:55 [info] SELECT version FROM schema_migrations
Oct 27 13:59:55 [info] SELECT version FROM schema_migrations
Oct 27 13:59:55 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 13:59:55 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:55 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 13:59:55 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 13:59:55 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:55 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 13:59:55 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 13:59:55 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 13:59:55 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 13:59:55 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:55 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 13:59:55 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 13:59:55 [info] DROP TABLE IF EXISTS `applications`
Oct 27 13:59:55 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 13:59:55 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 13:59:55 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 13:59:55 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:59:55 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 13:59:56 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 13:59:56 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 13:59:56 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 13:59:56 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 13:59:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 13:59:56 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 13:59:56 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 13:59:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 13:59:56 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 13:59:56 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 13:59:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 13:59:56 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 13:59:56 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 13:59:56 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 13:59:56 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 13:59:56 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 13:59:56 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 13:59:56 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:57 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 13:59:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 13:59:57 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 13:59:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 13:59:57 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:57 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 13:59:57 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 13:59:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 13:59:57 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 13:59:57 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 13:59:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 13:59:57 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 13:59:57 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 13:59:57 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 13:59:57 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 14:00:16 [info] SELECT version FROM schema_migrations
Oct 27 14:00:16 [info] SELECT version FROM schema_migrations
Oct 27 14:00:16 [info] SELECT version FROM schema_migrations
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 14:00:16 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 14:00:16 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 14:00:16 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:00:16 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:00:16 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 14:01:39 [info] SELECT version FROM schema_migrations
Oct 27 14:01:39 [info] SELECT version FROM schema_migrations
Oct 27 14:01:39 [info] SELECT version FROM schema_migrations
Oct 27 14:02:33 [info] SELECT version FROM schema_migrations
Oct 27 14:02:33 [info] SELECT version FROM schema_migrations
Oct 27 14:02:33 [info] SELECT version FROM schema_migrations
Oct 27 14:02:33 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:02:33 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:02:33 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 14:02:33 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:02:33 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:02:33 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 14:02:33 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 14:02:34 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 14:02:34 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:02:34 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:02:34 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 14:02:34 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 14:02:34 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:02:34 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 14:02:34 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 14:02:34 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:02:34 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:02:34 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 14:02:34 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:02:34 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:02:34 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 14:02:34 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 14:02:34 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 14:31:50 [info] SELECT version FROM schema_migrations
Oct 27 14:31:50 [info] SELECT version FROM schema_migrations
Oct 27 14:31:50 [info] SELECT version FROM schema_migrations
Oct 27 14:31:50 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:31:50 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:31:51 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:31:51 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 14:31:51 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:31:51 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:31:51 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:31:51 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 14:34:09 [info] SELECT version FROM schema_migrations
Oct 27 14:34:09 [info] SELECT version FROM schema_migrations
Oct 27 14:34:09 [info] SELECT version FROM schema_migrations
Oct 27 14:34:14 [info] SELECT version FROM schema_migrations
Oct 27 14:34:14 [info] SELECT version FROM schema_migrations
Oct 27 14:34:14 [info] SELECT version FROM schema_migrations
Oct 27 14:34:14 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:34:14 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:14 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 14:34:15 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:34:15 [info] CREATE TABLE `message_group_info` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:15 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 14:34:15 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 14:34:15 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 14:34:15 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:34:15 [info] CREATE TABLE `message_group_list` (
`message_group_id` integer(11) PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:15 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 14:34:15 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 14:34:15 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:34:15 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 14:34:15 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 14:34:15 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:34:15 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:34:15 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 14:34:15 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:34:15 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:34:16 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 14:34:16 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 14:34:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 14:34:16 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 14:34:16 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 14:34:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 14:34:16 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 14:34:16 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 14:34:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 14:34:16 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 14:34:16 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 14:34:16 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 14:34:16 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 14:34:16 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 14:34:16 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:34:16 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:16 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 14:34:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 14:34:17 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 14:34:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 14:34:17 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:17 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 14:34:17 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 14:34:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 14:34:17 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 14:34:17 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 14:34:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 14:34:17 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:34:17 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 14:34:17 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 14:34:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 14:36:24 [info] SELECT version FROM schema_migrations
Oct 27 14:36:24 [info] SELECT version FROM schema_migrations
Oct 27 14:36:24 [info] SELECT version FROM schema_migrations
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 14:36:24 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 14:36:24 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 14:36:24 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 14:36:24 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 14:36:25 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 14:36:25 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:36:25 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:36:25 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:36:25 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 14:36:32 [info] SELECT version FROM schema_migrations
Oct 27 14:36:32 [info] SELECT version FROM schema_migrations
Oct 27 14:36:32 [info] SELECT version FROM schema_migrations
Oct 27 14:36:32 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:36:32 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:36:32 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 14:36:33 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:36:33 [info] CREATE TABLE `message_group_info` (
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:36:33 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 14:36:33 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 14:37:08 [info] SELECT version FROM schema_migrations
Oct 27 14:37:08 [info] SELECT version FROM schema_migrations
Oct 27 14:37:08 [info] SELECT version FROM schema_migrations
Oct 27 14:37:08 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:37:08 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:08 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 14:37:08 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:37:08 [info] CREATE TABLE `message_group_info` (
`message_group_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:09 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 14:37:09 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 14:37:09 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 14:37:09 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:37:09 [info] CREATE TABLE `message_group_list` (
`message_group_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:09 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 14:37:09 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 14:37:09 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:37:09 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 14:37:09 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 14:37:09 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:37:09 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:37:09 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 14:37:09 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:37:09 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:37:09 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 14:37:10 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 14:37:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 14:37:10 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 14:37:10 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 14:37:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 14:37:10 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 14:37:10 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 14:37:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 14:37:10 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 14:37:10 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 14:37:10 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 14:37:10 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 14:37:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 14:37:10 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:37:10 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:10 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 14:37:11 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 14:37:11 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 14:37:11 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 14:37:11 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:11 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 14:37:11 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 14:37:11 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 14:37:11 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 14:37:11 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 14:37:11 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 14:37:11 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:11 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 14:37:11 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 14:37:11 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 27 14:37:30 [info] SELECT version FROM schema_migrations
Oct 27 14:37:30 [info] SELECT version FROM schema_migrations
Oct 27 14:37:30 [info] SELECT version FROM schema_migrations
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `moderator_notes`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `reminders`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `password_tokens`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Oct 27 14:37:30 [info] ALTER TABLE `suggested_users` DROP COLUMN `created_at`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101015225148'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `reports_status`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `user_roles`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Oct 27 14:37:30 [info] DROP INDEX `idx_reports_action_id_and_type` ON `reports`
Oct 27 14:37:30 [info] ALTER TABLE `reports` DROP COLUMN `moderated_at`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101011220909'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:37:30 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:37:30 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Oct 27 14:37:45 [info] SELECT version FROM schema_migrations
Oct 27 14:37:45 [info] SELECT version FROM schema_migrations
Oct 27 14:37:45 [info] SELECT version FROM schema_migrations
Oct 27 14:37:45 [info] DROP TABLE IF EXISTS `message_groups`
Oct 27 14:37:45 [info] CREATE TABLE `message_groups` (
`message_group_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`group_hash` varchar(32) NOT NULL,
`user_count` smallint(5) unsigned NOT NULL,
`user_ids` mediumtext NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:45 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Oct 27 14:37:45 [info] DROP TABLE IF EXISTS `message_group_info`
Oct 27 14:37:45 [info] CREATE TABLE `message_group_info` (
`message_group_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`message_count` smallint(5) unsigned NOT NULL,
`unread_count` smallint(5) unsigned NOT NULL,
`last_message_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:45 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Oct 27 14:37:45 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id_and_created ON `message_group_info`(message_group_id, user_id, created_at)
Oct 27 14:37:45 [info] CREATE INDEX idx_message_group_info_message_group_id_and_user_id ON `message_group_info`(message_group_id, user_id)
Oct 27 14:37:45 [info] DROP TABLE IF EXISTS `message_group_list`
Oct 27 14:37:45 [info] CREATE TABLE `message_group_list` (
`message_group_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`message_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:45 [info] CREATE INDEX idx_message_group_list_message_group_id_and_user_id_and_created ON `message_group_list`(message_group_id, user_id, created_at)
Oct 27 14:37:45 [info]     INSERT INTO message_groups (group_hash, user_ids, user_count, created_at) (
        SELECT DISTINCT MD5(IF(user_id < with_user_id, CONCAT_WS(',', user_id, with_user_id), CONCAT_WS(',', with_user_id, user_id))) AS group_hash, 
        IF(user_id < with_user_id, CONCAT_WS(',', user_id, with_user_id), CONCAT_WS(',', with_user_id, user_id)) AS user_ids,
        2 AS user_count, 
        0 AS created_at 
    FROM message_with);
Oct 27 14:37:45 [info]     INSERT INTO message_group_info (message_group_id, user_id, created_at, message_count, unread_count, last_message_at)
    (
        SELECT 
            message_groups.message_group_id, message_with.user_id, 0, message_with.messages, message_with.unread, message_with.last_message
        FROM 
            message_with 
        LEFT JOIN message_groups ON 
            message_groups.group_hash = MD5(IF(message_with.user_id < message_with.with_user_id, CONCAT_WS(',', message_with.user_id, message_with.with_user_id), CONCAT_WS(',', message_with.with_user_id, message_with.user_id)))
    )
Oct 27 14:37:45 [info]     INSERT INTO message_group_list (message_group_id, user_id, message_id, created_at)
    (
        SELECT 
            message_groups.message_group_id, message_with.user_id, message_list.message_id, message_list.added_on
        FROM 
            message_with
        LEFT JOIN message_groups ON 
            message_groups.group_hash = MD5(IF(message_with.user_id < message_with.with_user_id, CONCAT_WS(',', message_with.user_id, message_with.with_user_id), CONCAT_WS(',', message_with.with_user_id, message_with.user_id)))
        LEFT JOIN message_list ON
            message_list.message_with_id = message_with.message_with_id
    )  
Oct 27 14:37:45 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Oct 27 14:37:45 [info] DROP TABLE IF EXISTS `applications`
Oct 27 14:37:45 [info] CREATE TABLE `applications` (
`application_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`name` varchar(100),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(20) NOT NULL,
`client_secret` varchar(40) NOT NULL,
`rate_limit` smallint(3) unsigned DEFAULT 0,
`redirect_uri` varchar(255),
`token_expiration` int(11) unsigned DEFAULT 0 NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL,
`grant_types` smallint(2) unsigned DEFAULT 0,
`response_types` smallint(2) unsigned DEFAULT 0
) ;
Oct 27 14:37:45 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Oct 27 14:37:46 [info] DROP TABLE IF EXISTS `application_codes`
Oct 27 14:37:46 [info] CREATE TABLE `application_codes` (
`application_code_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`expires_in` int(11) unsigned NOT NULL,
`code` varchar(10) NOT NULL,
`redirect_uri` varchar(3000) NOT NULL,
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:37:46 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Oct 27 14:37:46 [info] DROP TABLE IF EXISTS `application_users`
Oct 27 14:37:46 [info] CREATE TABLE `application_users` (
`application_user_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`application_id` int(11) unsigned NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`created_at` int(11) unsigned NOT NULL,
`updated_at` int(11) unsigned DEFAULT 0 NOT NULL,
`oauth_token` varchar(20) NOT NULL,
`expires_in` int(11) unsigned DEFAULT 0 NOT NULL,
`refresh_token` varchar(16),
`scopes` smallint(2) unsigned DEFAULT 0 NOT NULL
) ;
Oct 27 14:37:46 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Oct 27 14:37:46 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Oct 27 14:37:46 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Oct 27 14:37:46 [info] ALTER TABLE reports ADD `moderated_at` int(11)
Oct 27 14:37:46 [info] CREATE INDEX idx_reports_action_id_and_type ON `reports`(action_id, type)
Oct 27 14:37:46 [info] INSERT INTO schema_migrations (version) VALUES ('20101011220909')
Oct 27 14:37:46 [info] CREATE TABLE `user_roles` (
`role_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`role_name` varchar(32),
`user_id` int(11) NOT NULL,
`created_at` int(11)
) ;
Oct 27 14:37:46 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Oct 27 14:37:46 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Oct 27 14:37:46 [info] CREATE TABLE `reports_status` (
`status_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`action_id` int(11) unsigned NOT NULL,
`type` smallint(3) NOT NULL,
`report_count` int(11) unsigned NOT NULL,
`content_user_id` int(11) unsigned,
`moderator_id` int(11) unsigned,
`created_at` int(11) unsigned NOT NULL,
`moderated_at` int(11) unsigned,
`status` int(5) unsigned DEFAULT 0
) ;
Oct 27 14:37:47 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Oct 27 14:37:47 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Oct 27 14:37:47 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Oct 27 14:37:47 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Oct 27 14:37:47 [info] DROP TABLE IF EXISTS `moderator_logs`
Oct 27 14:37:47 [info] CREATE TABLE `moderator_logs` (
`log_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`operation` smallint(3) unsigned,
`object_id` int(11) unsigned,
`meta` varchar(3000),
`type` smallint(3) unsigned,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:47 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Oct 27 14:37:47 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Oct 27 14:37:47 [info] ALTER TABLE suggested_users ADD `created_at` int(11) unsigned NOT NULL
Oct 27 14:37:47 [info] INSERT INTO schema_migrations (version) VALUES ('20101015225148')
Oct 27 14:37:47 [info] CREATE TABLE `password_tokens` (
`token_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`token` varchar(255) NOT NULL,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:47 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Oct 27 14:37:47 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Oct 27 14:37:47 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Oct 27 14:37:47 [info] CREATE TABLE `reminders` (
`reminder_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) NOT NULL,
`type` varchar(32) NOT NULL,
`last_sent_at` int(11),
`created_at` int(11) NOT NULL
) ;
Oct 27 14:37:47 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Oct 27 14:37:48 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Oct 27 14:37:48 [info] CREATE TABLE `moderator_notes` (
`note_id` integer(11) auto_increment PRIMARY KEY NOT NULL,
`user_id` int(11) unsigned NOT NULL,
`moderator_id` int(11) unsigned NOT NULL,
`body` text,
`created_at` int(11) unsigned NOT NULL
) ;
Oct 27 14:37:48 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Oct 27 14:37:48 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Oct 27 14:37:48 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Oct 28 11:02:10 [info] SELECT version FROM schema_migrations
Oct 28 11:02:10 [info] SELECT version FROM schema_migrations
Oct 28 11:02:10 [info] SELECT version FROM schema_migrations
Oct 28 11:02:17 [info] SELECT version FROM schema_migrations
Oct 28 11:02:17 [info] SELECT version FROM schema_migrations
Oct 28 11:02:17 [info] SELECT version FROM schema_migrations
Oct 28 11:02:17 [info] CREATE INDEX idx_user_notifications_all ON `user_notifications`(user_id, dismissed_on)
Oct 28 11:02:17 [info] INSERT INTO schema_migrations (version) VALUES ('20101028180045')
Nov 02 16:42:54 [info] CREATE TABLE `schema_migrations` (
`version` varchar(255)
) ;
Nov 02 16:42:54 [info] CREATE UNIQUE INDEX idx_schema_migrations_version ON `schema_migrations`(version)
Nov 02 16:47:10 [info] SELECT version FROM schema_migrations
Nov 02 16:47:10 [info] SELECT version FROM schema_migrations
Nov 02 16:47:10 [info] SELECT version FROM schema_migrations
Nov 02 16:47:10 [info] CREATE TABLE `foobars` (
`guid` varchar(255)
) ;
Nov 02 16:47:10 [info] INSERT INTO schema_migrations (version) VALUES ('20101102234610')
Nov 02 18:14:44 [info] SELECT version FROM schema_migrations
Nov 02 18:14:44 [info] SELECT version FROM schema_migrations
Nov 02 18:14:44 [info] SELECT version FROM schema_migrations
Nov 02 18:14:44 [info] DROP TABLE IF EXISTS `promotions`
Nov 02 18:14:44 [info] CREATE TABLE `promotions` (
`name` varchar(255),
`title` varchar(255),
`blurb` varchar(255),
`server_id` int(11),
`filename` varchar(255),
`url` varchar(255),
`active` int(11),
`id` int(11) UNSIGNED auto_increment NOT NULL,
 PRIMARY KEY (`promotion_id`,`id`)) ;
Nov 02 18:28:21 [info] SELECT version FROM schema_migrations
Nov 02 18:28:21 [info] SELECT version FROM schema_migrations
Nov 02 18:28:21 [info] SELECT version FROM schema_migrations
Nov 02 18:28:21 [info] DROP TABLE IF EXISTS `promotions`
Nov 02 18:28:21 [info] CREATE TABLE `promotions` (
`promotion_id` int(11),
`name` varchar(255),
`title` varchar(255),
`blurb` varchar(255),
`server_id` int(11),
`filename` varchar(255),
`url` varchar(255),
`active` int(11),
 PRIMARY KEY (`promotion_id`)) ;
Nov 02 18:28:21 [info] INSERT INTO schema_migrations (version) VALUES ('20100909133617')
Nov 02 18:28:21 [info] DROP TABLE IF EXISTS `reports`
Nov 02 18:28:21 [info] CREATE TABLE `reports` (
`report_id` int(11),
`user_id` int(11),
`type` smallint,
`action_id` int(11),
`created_at` int(11),
`reason` varchar(255),
`meta` text,
 PRIMARY KEY (`report_id`)) ;
Nov 02 18:28:21 [info] INSERT INTO schema_migrations (version) VALUES ('20100921114643')
Nov 02 18:28:21 [info] DROP TABLE IF EXISTS `message_groups`
Nov 02 18:28:21 [info] CREATE TABLE `message_groups` (
`message_group_id` int(11),
`group_hash` varchar(255),
`user_count` smallint,
`user_ids` mediumtext,
`created_at` int(11),
 PRIMARY KEY (`message_group_id`)) ;
Nov 02 18:28:21 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Nov 02 18:28:21 [info] DROP TABLE IF EXISTS `message_group_info`
Nov 02 18:28:21 [info] CREATE TABLE `message_group_info` (
`message_group_id` int(11),
`user_id` int(11),
`created_at` int(11),
`message_count` smallint,
`unread_count` smallint,
`last_message_at` int(11)) ;
Nov 02 18:28:21 [info] CREATE INDEX idx_message_group_info_user_id_and_unread_count ON `message_group_info`(user_id, unread_count)
Nov 02 18:31:38 [info] SELECT version FROM schema_migrations
Nov 02 18:31:38 [info] SELECT version FROM schema_migrations
Nov 02 18:31:38 [info] SELECT version FROM schema_migrations
Nov 02 18:31:38 [info] DROP TABLE IF EXISTS `message_groups`
Nov 02 18:31:38 [info] CREATE TABLE `message_groups` (
`message_group_id` int(11),
`group_hash` varchar(255),
`user_count` smallint,
`user_ids` mediumtext,
`created_at` int(11),
 PRIMARY KEY (`message_group_id`)) ;
Nov 02 18:31:39 [info] CREATE INDEX idx_message_groups_group_hash ON `message_groups`(group_hash)
Nov 02 18:31:39 [info] DROP TABLE IF EXISTS `message_group_info`
Nov 02 18:31:39 [info] CREATE TABLE `message_group_info` (
`message_group_id` int(11),
`user_id` int(11),
`created_at` int(11),
`message_count` smallint,
`unread_count` smallint,
`last_message_at` int(11)) ;
Nov 02 18:31:39 [info] CREATE INDEX idx_a ON `message_group_info`(user_id, unread_count)
Nov 02 18:31:39 [info] CREATE INDEX idx_b ON `message_group_info`(message_group_id, user_id, created_at)
Nov 02 18:31:39 [info] CREATE INDEX idx_c ON `message_group_info`(message_group_id, user_id)
Nov 02 18:31:39 [info] DROP TABLE IF EXISTS `message_group_list`
Nov 02 18:31:39 [info] CREATE TABLE `message_group_list` (
`message_group_id` int(11),
`user_id` int(11),
`message_id` int(11),
`created_at` int(11)) ;
Nov 02 18:31:39 [info] CREATE INDEX idx_mgl ON `message_group_list`(message_group_id, user_id, created_at)
Nov 02 18:31:39 [info] INSERT INTO schema_migrations (version) VALUES ('20100927093602')
Nov 02 18:31:39 [info] DROP TABLE IF EXISTS `applications`
Nov 02 18:31:39 [info] CREATE TABLE `applications` (
`application_id` int(11),
`name` varchar(255),
`description` mediumtext,
`url` varchar(255),
`client_id` varchar(255),
`client_secret` varchar(255),
`rate_limit` smallint,
`redirect_uri` varchar(255),
`token_expiration` int(11),
`scopes` smallint,
`grant_types` smallint,
`response_types` smallint,
 PRIMARY KEY (`application_id`)) ;
Nov 02 18:31:39 [info] CREATE UNIQUE INDEX idx_applications_client_id ON `applications`(client_id)
Nov 02 18:31:40 [info] DROP TABLE IF EXISTS `application_codes`
Nov 02 18:31:40 [info] CREATE TABLE `application_codes` (
`application_code_id` int(11),
`application_id` int(11),
`user_id` int(11),
`created_at` int(11),
`expires_in` int(11),
`code` varchar(255),
`redirect_uri` varchar(255),
`scopes` smallint,
 PRIMARY KEY (`application_code_id`)) ;
Nov 02 18:31:40 [info] CREATE UNIQUE INDEX idx_application_codes_code ON `application_codes`(code)
Nov 02 18:31:40 [info] DROP TABLE IF EXISTS `application_users`
Nov 02 18:31:40 [info] CREATE TABLE `application_users` (
`application_user_id` int(11),
`application_id` int(11),
`user_id` int(11),
`created_at` int(11),
`updated_at` int(11),
`oauth_token` varchar(255),
`expires_in` int(11),
`refresh_token` varchar(255),
`scopes` smallint,
 PRIMARY KEY (`application_user_id`)) ;
Nov 02 18:31:40 [info] CREATE UNIQUE INDEX idx_application_users_oauth_token ON `application_users`(oauth_token)
Nov 02 18:31:40 [info] CREATE UNIQUE INDEX idx_application_users_refresh_token ON `application_users`(refresh_token)
Nov 02 18:31:40 [info] INSERT INTO schema_migrations (version) VALUES ('20101006114707')
Nov 02 18:31:40 [info] CREATE TABLE `user_roles` (
`role_id` int(11),
`role_name` varchar(255),
`user_id` int(11),
`created_at` int(11),
 PRIMARY KEY (`role_id`)) ;
Nov 02 18:31:40 [info] CREATE UNIQUE INDEX idx_user_roles_user_id_and_role_name ON `user_roles`(user_id, role_name)
Nov 02 18:31:40 [info] INSERT INTO schema_migrations (version) VALUES ('20101011222215')
Nov 02 18:31:40 [info] CREATE TABLE `reports_status` (
`status_id` int(11),
`action_id` int(11),
`type` smallint,
`report_count` int(11),
`content_user_id` int(11),
`moderator_id` int(11),
`created_at` int(11),
`moderated_at` int(11),
`status` int(11),
 PRIMARY KEY (`status_id`)) ;
Nov 02 18:31:40 [info] CREATE UNIQUE INDEX idx_reports_status_action_id_and_type ON `reports_status`(action_id, type)
Nov 02 18:31:40 [info] CREATE INDEX idx_reports_status_type_and_moderated_at ON `reports_status`(type, moderated_at)
Nov 02 18:31:40 [info] CREATE INDEX idx_reports_status_content_user_id ON `reports_status`(content_user_id)
Nov 02 18:31:41 [info] INSERT INTO schema_migrations (version) VALUES ('20101012181952')
Nov 02 18:31:41 [info] DROP TABLE IF EXISTS `moderator_logs`
Nov 02 18:31:41 [info] CREATE TABLE `moderator_logs` (
`log_id` int(11),
`user_id` int(11),
`operation` smallint,
`object_id` int(11),
`meta` varchar(255),
`type` smallint,
`created_at` int(11),
 PRIMARY KEY (`log_id`)) ;
Nov 02 18:31:41 [info] CREATE INDEX idx_moderator_logs_user_id_and_created_at ON `moderator_logs`(user_id, created_at)
Nov 02 18:31:41 [info] INSERT INTO schema_migrations (version) VALUES ('20101013224737')
Nov 02 18:31:41 [info] CREATE TABLE `password_tokens` (
`token_id` int(11),
`user_id` int(11),
`token` varchar(255),
`created_at` int(11),
 PRIMARY KEY (`token_id`)) ;
Nov 02 18:31:41 [info] CREATE UNIQUE INDEX idx_password_tokens_user_id_and_token ON `password_tokens`(user_id, token)
Nov 02 18:31:41 [info] CREATE INDEX idx_password_tokens_token ON `password_tokens`(token)
Nov 02 18:31:41 [info] INSERT INTO schema_migrations (version) VALUES ('20101019232843')
Nov 02 18:31:41 [info] CREATE TABLE `reminders` (
`reminder_id` int(11),
`user_id` int(11),
`type` varchar(255),
`last_sent_at` int(11),
`created_at` int(11),
 PRIMARY KEY (`reminder_id`)) ;
Nov 02 18:31:41 [info] CREATE INDEX idx_user_reminders ON `reminders`(last_sent_at, user_id, type)
Nov 02 18:31:41 [info] INSERT INTO schema_migrations (version) VALUES ('20101022184810')
Nov 02 18:31:41 [info] CREATE TABLE `moderator_notes` (
`note_id` int(11),
`user_id` int(11),
`moderator_id` int(11),
`body` text,
`created_at` int(11),
 PRIMARY KEY (`note_id`)) ;
Nov 02 18:31:41 [info] CREATE INDEX idx_moderator_notes_user_id ON `moderator_notes`(user_id)
Nov 02 18:31:41 [info] CREATE INDEX idx_moderator_notes_moderator_id ON `moderator_notes`(moderator_id)
Nov 02 18:31:42 [info] INSERT INTO schema_migrations (version) VALUES ('20101026222530')
Nov 02 18:31:42 [info] CREATE TABLE `foobars` (
`guid` varchar(255)) ;
Nov 02 18:31:42 [info] INSERT INTO schema_migrations (version) VALUES ('20101102234610')
Nov 02 18:32:26 [info] SELECT version FROM schema_migrations
Nov 02 18:32:26 [info] SELECT version FROM schema_migrations
Nov 02 18:32:26 [info] SELECT version FROM schema_migrations
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `foobars`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101102234610'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `moderator_notes`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101026222530'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `reminders`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101022184810'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `password_tokens`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101019232843'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `moderator_logs`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101013224737'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `reports_status`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101012181952'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `user_roles`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101011222215'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `applications`
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `application_codes`
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `application_users`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20101006114707'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `message_groups`
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `message_group_info`
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `message_group_list`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20100927093602'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `reports`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20100921114643'
Nov 02 18:32:26 [info] DROP TABLE IF EXISTS `promotions`
Nov 02 18:32:26 [info] DELETE FROM schema_migrations WHERE version = '20100909133617'
